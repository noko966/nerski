!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.GPickr=e():t.GPickr=e()}(this,(()=>(()=>{var t={931:t=>{var e;self,e=()=>(()=>{"use strict";var t={d:(e,o)=>{for(var i in o)t.o(o,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.d(e,{default:()=>S});var o={};function i(t,e,o,i,s={}){e instanceof HTMLCollection||e instanceof NodeList?e=Array.from(e):Array.isArray(e)||(e=[e]),Array.isArray(o)||(o=[o]);for(const n of e)for(const e of o)n[t](e,i,{capture:!1,...s});return Array.prototype.slice.call(arguments,1)}t.r(o),t.d(o,{adjustableInputNumbers:()=>p,createElementFromString:()=>r,createFromTemplate:()=>a,eventPath:()=>l,off:()=>n,on:()=>s,resolveElement:()=>c});const s=i.bind(null,"addEventListener"),n=i.bind(null,"removeEventListener");function r(t){const e=document.createElement("div");return e.innerHTML=t.trim(),e.firstElementChild}function a(t){const e=(t,e)=>{const o=t.getAttribute(e);return t.removeAttribute(e),o},o=(t,i={})=>{const s=e(t,":obj"),n=e(t,":ref"),r=s?i[s]={}:i;n&&(i[n]=t);for(const i of Array.from(t.children)){const t=e(i,":arr"),s=o(i,t?{}:r);t&&(r[t]||(r[t]=[])).push(Object.keys(s).length?s:i)}return i};return o(r(t))}function l(t){let e=t.path||t.composedPath&&t.composedPath();if(e)return e;let o=t.target.parentElement;for(e=[t.target,o];o=o.parentElement;)e.push(o);return e.push(document,window),e}function c(t){return t instanceof Element?t:"string"==typeof t?t.split(/>>/g).reduce(((t,e,o,i)=>(t=t.querySelector(e),o<i.length-1?t.shadowRoot:t)),document):null}function p(t,e=t=>t){function o(o){const i=[.001,.01,.1][Number(o.shiftKey||2*o.ctrlKey)]*(o.deltaY<0?1:-1);let s=0,n=t.selectionStart;t.value=t.value.replace(/[\d.]+/g,((t,o)=>o<=n&&o+t.length>=n?(n=o,e(Number(t),i,s)):(s++,t))),t.focus(),t.setSelectionRange(n,n),o.preventDefault(),t.dispatchEvent(new Event("input"))}s(t,"focus",(()=>s(window,"wheel",o,{passive:!1}))),s(t,"blur",(()=>n(window,"wheel",o)))}const{min:h,max:d,floor:u,round:m}=Math;function g(t,e,o){e/=100,o/=100;const i=u(t=t/360*6),s=t-i,n=o*(1-e),r=o*(1-s*e),a=o*(1-(1-s)*e),l=i%6;return[255*[o,r,n,n,a,o][l],255*[a,o,o,r,n,n][l],255*[n,n,a,o,o,r][l]]}function f(t,e,o){const i=(2-(e/=100))*(o/=100)/2;return 0!==i&&(e=1===i?0:i<.5?e*o/(2*i):e*o/(2-2*i)),[t,100*e,100*i]}function _(t,e,o){const i=h(t/=255,e/=255,o/=255),s=d(t,e,o),n=s-i;let r,a;if(0===n)r=a=0;else{a=n/s;const i=((s-t)/6+n/2)/n,l=((s-e)/6+n/2)/n,c=((s-o)/6+n/2)/n;t===s?r=c-l:e===s?r=1/3+i-c:o===s&&(r=2/3+l-i),r<0?r+=1:r>1&&(r-=1)}return[360*r,100*a,100*s]}function v(t,e,o,i){return e/=100,o/=100,[..._(255*(1-h(1,(t/=100)*(1-(i/=100))+i)),255*(1-h(1,e*(1-i)+i)),255*(1-h(1,o*(1-i)+i)))]}function b(t,e,o){e/=100;const i=2*(e*=(o/=100)<.5?o:1-o)/(o+e)*100,s=100*(o+e);return[t,isNaN(i)?0:i,s]}function y(t){return _(...t.match(/.{2}/g).map((t=>parseInt(t,16))))}function w(t=0,e=0,o=0,i=1){const s=(t,e)=>(o=-1)=>e(~o?t.map((t=>Number(t.toFixed(o)))):t),n={h:t,s:e,v:o,a:i,toHSVA(){const t=[n.h,n.s,n.v,n.a];return t.toString=s(t,(t=>`hsva(${t[0]}, ${t[1]}%, ${t[2]}%, ${n.a})`)),t},toHSLA(){const t=[...f(n.h,n.s,n.v),n.a];return t.toString=s(t,(t=>`hsla(${t[0]}, ${t[1]}%, ${t[2]}%, ${n.a})`)),t},toRGBA(){const t=[...g(n.h,n.s,n.v),n.a];return t.toString=s(t,(t=>`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${n.a})`)),t},toCMYK(){const t=function(t,e,o){const i=g(t,e,o),s=i[0]/255,n=i[1]/255,r=i[2]/255,a=h(1-s,1-n,1-r);return[100*(1===a?0:(1-s-a)/(1-a)),100*(1===a?0:(1-n-a)/(1-a)),100*(1===a?0:(1-r-a)/(1-a)),100*a]}(n.h,n.s,n.v);return t.toString=s(t,(t=>`cmyk(${t[0]}%, ${t[1]}%, ${t[2]}%, ${t[3]}%)`)),t},toHEXA(){const t=function(t,e,o){return g(t,e,o).map((t=>m(t).toString(16).padStart(2,"0")))}(n.h,n.s,n.v),e=n.a>=1?"":Number((255*n.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return e&&t.push(e),t.toString=()=>`#${t.join("").toUpperCase()}`,t},clone:()=>w(n.h,n.s,n.v,n.a)};return n}const k=t=>Math.max(Math.min(t,1),0);function $(t){const e={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},t),_keyboard(t){const{options:o}=e,{type:i,key:s}=t;if(document.activeElement===o.wrapper){const{lock:o}=e.options,n="ArrowUp"===s,r="ArrowRight"===s,a="ArrowDown"===s,l="ArrowLeft"===s;if("keydown"===i&&(n||r||a||l)){let i=0,s=0;"v"===o?i=n||r?1:-1:"h"===o?i=n||r?-1:1:(s=n?-1:a?1:0,i=l?-1:r?1:0),e.update(k(e.cache.x+.01*i),k(e.cache.y+.01*s)),t.preventDefault()}else s.startsWith("Arrow")&&(e.options.onstop(),t.preventDefault())}},_tapstart(t){s(document,["mouseup","touchend","touchcancel"],e._tapstop),s(document,["mousemove","touchmove"],e._tapmove),t.cancelable&&t.preventDefault(),e._tapmove(t)},_tapmove(t){const{options:o,cache:i}=e,{lock:s,element:n,wrapper:r}=o,a=r.getBoundingClientRect();let l=0,c=0;if(t){const e=t&&t.touches&&t.touches[0];l=t?(e||t).clientX:0,c=t?(e||t).clientY:0,l<a.left?l=a.left:l>a.left+a.width&&(l=a.left+a.width),c<a.top?c=a.top:c>a.top+a.height&&(c=a.top+a.height),l-=a.left,c-=a.top}else i&&(l=i.x*a.width,c=i.y*a.height);"h"!==s&&(n.style.left=`calc(${l/a.width*100}% - ${n.offsetWidth/2}px)`),"v"!==s&&(n.style.top=`calc(${c/a.height*100}% - ${n.offsetHeight/2}px)`),e.cache={x:l/a.width,y:c/a.height};const p=k(l/a.width),h=k(c/a.height);switch(s){case"v":return o.onchange(p);case"h":return o.onchange(h);default:return o.onchange(p,h)}},_tapstop(){e.options.onstop(),n(document,["mouseup","touchend","touchcancel"],e._tapstop),n(document,["mousemove","touchmove"],e._tapmove)},trigger(){e._tapmove()},update(t=0,o=0){const{left:i,top:s,width:n,height:r}=e.options.wrapper.getBoundingClientRect();"h"===e.options.lock&&(o=t),e._tapmove({clientX:i+n*t,clientY:s+r*o})},destroy(){const{options:t,_tapstart:o,_keyboard:i}=e;n(document,["keydown","keyup"],i),n([t.wrapper,t.element],"mousedown",o),n([t.wrapper,t.element],"touchstart",o,{passive:!1})}},{options:o,_tapstart:i,_keyboard:r}=e;return s([o.wrapper,o.element],"mousedown",i),s([o.wrapper,o.element],"touchstart",i,{passive:!1}),s(document,["keydown","keyup"],r),e}function A(t={}){t=Object.assign({onchange:()=>0,className:"",elements:[]},t);const e=s(t.elements,"click",(e=>{t.elements.forEach((o=>o.classList[e.target===o?"add":"remove"](t.className))),t.onchange(e),e.stopPropagation()}));return{destroy:()=>n(...e)}}const C={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0};class S{static utils=o;static version="1.9.1";static I18N_DEFAULTS={"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"};static DEFAULT_OPTIONS={appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"};_initializingActive=!0;_recalc=!0;_nanopop=null;_root=null;_color=w();_lastColor=w();_swatchColors=[];_setupAnimationFrame=null;_eventListener={init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]};constructor(t){this.options=t=Object.assign({...S.DEFAULT_OPTIONS},t);const{swatches:e,components:o,theme:i,sliders:s,lockOpacity:n,padding:r}=t;["nano","monolith"].includes(i)&&!s&&(t.sliders="h"),o.interaction||(o.interaction={});const{preview:a,opacity:l,hue:c,palette:p}=o;o.opacity=!n&&l,o.palette=p||a||l||c,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),e&&e.length&&e.forEach((t=>this.addSwatch(t)));const{button:h,app:d}=this._root;this._nanopop=((t,e,o)=>{const i="object"!=typeof t||t instanceof HTMLElement?{reference:t,popper:e,...o}:t;return{update(t=i){const{reference:e,popper:o}=Object.assign(i,t);if(!o||!e)throw new Error("Popper- or reference-element missing.");return((t,e,o)=>{const{container:i,arrow:s,margin:n,padding:r,position:a,variantFlipOrder:l,positionFlipOrder:c}={container:document.documentElement.getBoundingClientRect(),...C,...o},{left:p,top:h}=e.style;e.style.left="0",e.style.top="0";const d=t.getBoundingClientRect(),u=e.getBoundingClientRect(),m={t:d.top-u.height-n,b:d.bottom+n,r:d.right+n,l:d.left-u.width-n},g={vs:d.left,vm:d.left+d.width/2-u.width/2,ve:d.left+d.width-u.width,hs:d.top,hm:d.bottom-d.height/2-u.height/2,he:d.bottom-u.height},[f,_="middle"]=a.split("-"),v=c[f],b=l[_],{top:y,left:w,bottom:k,right:$}=i;for(const t of v){const o="t"===t||"b"===t;let i=m[t];const[n,a]=o?["top","left"]:["left","top"],[l,c]=o?[u.height,u.width]:[u.width,u.height],[p,h]=o?[k,$]:[$,k],[f,_]=o?[y,w]:[w,y];if(!(i<f||i+l+r>p))for(const p of b){let m=g[(o?"v":"h")+p];if(!(m<_||m+c+r>h)){if(m-=u[a],i-=u[n],e.style[a]=`${m}px`,e.style[n]=`${i}px`,s){const e=o?d.width/2:d.height/2,r=c/2,h=e>r,u=m+{s:h?r:e,m:r,e:h?r:c-e}[p],g=i+{t:l,b:0,r:0,l}[t];s.style[a]=`${u}px`,s.style[n]=`${g}px`}return t+p}}}return e.style.left=p,e.style.top=h,null})(e,o,i)}}})(h,d,{margin:r}),h.setAttribute("role","button"),h.setAttribute("aria-label",this._t("btn:toggle"));const u=this;this._setupAnimationFrame=requestAnimationFrame((function e(){if(!d.offsetWidth)return requestAnimationFrame(e);u.setColor(t.default),u._rePositioningPicker(),t.defaultRepresentation&&(u._representation=t.defaultRepresentation,u.setColorRepresentation(u._representation)),t.showAlways&&u.show(),u._initializingActive=!1,u._emit("init")}))}static create=t=>new S(t);_preBuild(){const{options:t}=this;for(const e of["el","container"])t[e]=c(t[e]);this._root=(t=>{const{components:e,useAsButton:o,inline:i,appClass:s,theme:n,lockOpacity:r}=t.options,l=t=>t?"":'style="display:none" hidden',c=e=>t._t(e),p=a(`\n      <div :ref="root" class="pickr">\n\n        ${o?"":'<button type="button" :ref="button" class="pcr-button"></button>'}\n\n        <div :ref="app" class="pcr-app ${s||""}" data-theme="${n}" ${i?'style="position: unset"':""} aria-label="${c("ui:dialog")}" role="window">\n          <div class="pcr-selection" ${l(e.palette)}>\n            <div :obj="preview" class="pcr-color-preview" ${l(e.preview)}>\n              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${c("btn:last-color")}"></button>\n              <div :ref="currentColor" class="pcr-current-color"></div>\n            </div>\n\n            <div :obj="palette" class="pcr-color-palette">\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${c("aria:palette")}" role="listbox"></div>\n            </div>\n\n            <div :obj="hue" class="pcr-color-chooser" ${l(e.hue)}>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${c("aria:hue")}" role="slider"></div>\n            </div>\n\n            <div :obj="opacity" class="pcr-color-opacity" ${l(e.opacity)}>\n              <div :ref="picker" class="pcr-picker"></div>\n              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${c("aria:opacity")}" role="slider"></div>\n            </div>\n          </div>\n\n          <div class="pcr-swatches ${e.palette?"":"pcr-last"}" :ref="swatches"></div>\n\n          <div :obj="interaction" class="pcr-interaction" ${l(Object.keys(e.interaction).length)}>\n            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${l(e.interaction.input)} aria-label="${c("aria:input")}">\n\n            <input :arr="options" class="pcr-type" data-type="HEXA" value="${r?"HEX":"HEXA"}" type="button" ${l(e.interaction.hex)}>\n            <input :arr="options" class="pcr-type" data-type="RGBA" value="${r?"RGB":"RGBA"}" type="button" ${l(e.interaction.rgba)}>\n            <input :arr="options" class="pcr-type" data-type="HSLA" value="${r?"HSL":"HSLA"}" type="button" ${l(e.interaction.hsla)}>\n            <input :arr="options" class="pcr-type" data-type="HSVA" value="${r?"HSV":"HSVA"}" type="button" ${l(e.interaction.hsva)}>\n            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${l(e.interaction.cmyk)}>\n\n            <input :ref="save" class="pcr-save" value="${c("btn:save")}" type="button" ${l(e.interaction.save)} aria-label="${c("aria:btn:save")}">\n            <input :ref="cancel" class="pcr-cancel" value="${c("btn:cancel")}" type="button" ${l(e.interaction.cancel)} aria-label="${c("aria:btn:cancel")}">\n            <input :ref="clear" class="pcr-clear" value="${c("btn:clear")}" type="button" ${l(e.interaction.clear)} aria-label="${c("aria:btn:clear")}">\n          </div>\n        </div>\n      </div>\n    `),h=p.interaction;return h.options.find((t=>!t.hidden&&!t.classList.add("active"))),h.type=()=>h.options.find((t=>t.classList.contains("active"))),p})(this),t.useAsButton&&(this._root.button=t.el),t.container.appendChild(this._root.root)}_finalBuild(){const t=this.options,e=this._root;if(t.container.removeChild(e.root),t.inline){const o=t.el.parentElement;t.el.nextSibling?o.insertBefore(e.app,t.el.nextSibling):o.appendChild(e.app)}else t.container.appendChild(e.app);t.useAsButton?t.inline&&t.el.remove():t.el.parentNode.replaceChild(e.root,t.el),t.disabled&&this.disable(),t.comparison||(e.button.style.transition="none",t.useAsButton||(e.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){const t=this,e=this.options.components,o=(t.options.sliders||"v").repeat(2),[i,s]=o.match(/^[vh]+$/g)?o:[],n=()=>this._color||(this._color=this._lastColor.clone()),r={palette:$({element:t._root.palette.picker,wrapper:t._root.palette.palette,onstop:()=>t._emit("changestop","slider",t),onchange(o,i){if(!e.palette)return;const s=n(),{_root:r,options:a}=t,{lastColor:l,currentColor:c}=r.preview;t._recalc&&(s.s=100*o,s.v=100-100*i,s.v<0&&(s.v=0),t._updateOutput("slider"));const p=s.toRGBA().toString(0);this.element.style.background=p,this.wrapper.style.background=`\n                        linear-gradient(to top, rgba(0, 0, 0, ${s.a}), transparent),\n                        linear-gradient(to left, hsla(${s.h}, 100%, 50%, ${s.a}), rgba(255, 255, 255, ${s.a}))\n                    `,a.comparison?a.useAsButton||t._lastColor||l.style.setProperty("--pcr-color",p):(r.button.style.setProperty("--pcr-color",p),r.button.classList.remove("clear"));const h=s.toHEXA().toString();for(const{el:e,color:o}of t._swatchColors)e.classList[h===o.toHEXA().toString()?"add":"remove"]("pcr-active");c.style.setProperty("--pcr-color",p)}}),hue:$({lock:"v"===s?"h":"v",element:t._root.hue.picker,wrapper:t._root.hue.slider,onstop:()=>t._emit("changestop","slider",t),onchange(o){if(!e.hue||!e.palette)return;const i=n();t._recalc&&(i.h=360*o),this.element.style.backgroundColor=`hsl(${i.h}, 100%, 50%)`,r.palette.trigger()}}),opacity:$({lock:"v"===i?"h":"v",element:t._root.opacity.picker,wrapper:t._root.opacity.slider,onstop:()=>t._emit("changestop","slider",t),onchange(o){if(!e.opacity||!e.palette)return;const i=n();t._recalc&&(i.a=Math.round(100*o)/100),this.element.style.background=`rgba(0, 0, 0, ${i.a})`,r.palette.trigger()}}),selectable:A({elements:t._root.interaction.options,className:"active",onchange(e){t._representation=e.target.getAttribute("data-type").toUpperCase(),t._recalc&&t._updateOutput("swatch")}})};this._components=r}_bindEvents(){const{_root:t,options:e}=this,o=[s(t.interaction.clear,"click",(()=>this._clearColor())),s([t.interaction.cancel,t.preview.lastColor],"click",(()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")})),s(t.interaction.save,"click",(()=>{!this.applyColor()&&!e.showAlways&&this.hide()})),s(t.interaction.result,["keyup","input"],(t=>{this.setColor(t.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),t.stopImmediatePropagation()})),s(t.interaction.result,["focus","blur"],(t=>{this._recalc="blur"===t.type,this._recalc&&this._updateOutput(null)})),s([t.palette.palette,t.palette.picker,t.hue.slider,t.hue.picker,t.opacity.slider,t.opacity.picker],["mousedown","touchstart"],(()=>this._recalc=!0),{passive:!0})];if(!e.showAlways){const i=e.closeWithKey;o.push(s(t.button,"click",(()=>this.isOpen()?this.hide():this.show())),s(document,"keyup",(t=>this.isOpen()&&(t.key===i||t.code===i)&&this.hide())),s(document,["touchstart","mousedown"],(e=>{this.isOpen()&&!l(e).some((e=>e===t.app||e===t.button))&&this.hide()}),{capture:!0}))}if(e.adjustableNumbers){const e={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};p(t.interaction.result,((t,o,i)=>{const s=e[this.getColorRepresentation().toLowerCase()];if(s){const e=s[i],n=t+(e>=100?1e3*o:o);return n<=0?0:Number((n<e?n:e).toPrecision(3))}return t}))}if(e.autoReposition&&!e.inline){let t=null;const i=this;o.push(s(window,["scroll","resize"],(()=>{i.isOpen()&&(e.closeOnScroll&&i.hide(),null===t?(t=setTimeout((()=>t=null),100),requestAnimationFrame((function e(){i._rePositioningPicker(),null!==t&&requestAnimationFrame(e)}))):(clearTimeout(t),t=setTimeout((()=>t=null),100)))}),{capture:!0}))}this._eventBindings=o}_rePositioningPicker(){const{options:t}=this;if(!t.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:t.position})){const t=this._root.app,e=t.getBoundingClientRect();t.style.top=(window.innerHeight-e.height)/2+"px",t.style.left=(window.innerWidth-e.width)/2+"px"}}_updateOutput(t){const{_root:e,_color:o,options:i}=this;if(e.interaction.type()){const t=`to${e.interaction.type().getAttribute("data-type")}`;e.interaction.result.value="function"==typeof o[t]?o[t]().toString(i.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",o,t,this)}_clearColor(t=!1){const{_root:e,options:o}=this;o.useAsButton||e.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),e.button.classList.add("clear"),o.showAlways||this.hide(),this._lastColor=null,this._initializingActive||t||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(t){const{values:e,type:o,a:i}=function(t){t=t.match(/^[a-zA-Z]+$/)?function(t){if("black"===t.toLowerCase())return"#000";const e=document.createElement("canvas").getContext("2d");return e.fillStyle=t,"#000"===e.fillStyle?null:e.fillStyle}(t):t;const e={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},o=t=>t.map((t=>/^(|\d+)\.\d+|\d+$/.test(t)?Number(t):void 0));let i;t:for(const s in e)if(i=e[s].exec(t))switch(s){case"cmyk":{const[,t,e,n,r]=o(i);if(t>100||e>100||n>100||r>100)break t;return{values:v(t,e,n,r),type:s}}case"rgba":{let[,t,,e,,n,,,r]=o(i);if(t="%"===i[2]?t/100*255:t,e="%"===i[4]?e/100*255:e,n="%"===i[6]?n/100*255:n,r="%"===i[9]?r/100:r,t>255||e>255||n>255||r<0||r>1)break t;return{values:[..._(t,e,n),r],a:r,type:s}}case"hexa":{let[,t]=i;4!==t.length&&3!==t.length||(t=t.split("").map((t=>t+t)).join(""));const e=t.substring(0,6);let o=t.substring(6);return o=o?parseInt(o,16)/255:void 0,{values:[...y(e),o],a:o,type:s}}case"hsla":{let[,t,e,n,,r]=o(i);if(r="%"===i[6]?r/100:r,t>360||e>100||n>100||r<0||r>1)break t;return{values:[...b(t,e,n),r],a:r,type:s}}case"hsva":{let[,t,e,n,,r]=o(i);if(r="%"===i[6]?r/100:r,t>360||e>100||n>100||r<0||r>1)break t;return{values:[t,e,n,r],a:r,type:s}}}return{values:null,type:null}}(t),{lockOpacity:s}=this.options,n=void 0!==i&&1!==i;return e&&3===e.length&&(e[3]=void 0),{values:!e||s&&n?null:e,type:o}}_t(t){return this.options.i18n[t]||S.I18N_DEFAULTS[t]}_emit(t,...e){this._eventListener[t].forEach((t=>t(...e,this)))}on(t,e){return this._eventListener[t].push(e),this}off(t,e){const o=this._eventListener[t]||[],i=o.indexOf(e);return~i&&o.splice(i,1),this}addSwatch(t){const{values:e}=this._parseLocalColor(t);if(e){const{_swatchColors:t,_root:o}=this,i=w(...e),n=r(`<button type="button" style="--pcr-color: ${i.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return o.swatches.appendChild(n),t.push({el:n,color:i}),this._eventBindings.push(s(n,"click",(()=>{this.setHSVA(...i.toHSVA(),!0),this._emit("swatchselect",i),this._emit("change",i,"swatch",this)}))),!0}return!1}removeSwatch(t){const e=this._swatchColors[t];if(e){const{el:o}=e;return this._root.swatches.removeChild(o),this._swatchColors.splice(t,1),!0}return!1}applyColor(t=!1){const{preview:e,button:o}=this._root,i=this._color.toRGBA().toString(0);return e.lastColor.style.setProperty("--pcr-color",i),this.options.useAsButton||o.style.setProperty("--pcr-color",i),o.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||t||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach((t=>n(...t))),Object.keys(this._components).forEach((t=>this._components[t].destroy()))}destroyAndRemove(){this.destroy();const{root:t,app:e}=this._root;t.parentElement&&t.parentElement.removeChild(t),e.parentElement.removeChild(e),Object.keys(this).forEach((t=>this[t]=null))}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(t=360,e=0,o=0,i=1,s=!1){const n=this._recalc;if(this._recalc=!1,t<0||t>360||e<0||e>100||o<0||o>100||i<0||i>1)return!1;this._color=w(t,e,o,i);const{hue:r,opacity:a,palette:l}=this._components;return r.update(t/360),a.update(i),l.update(e/100,1-o/100),s||this.applyColor(),n&&this._updateOutput(),this._recalc=n,!0}setColor(t,e=!1){if(null===t)return this._clearColor(e),!0;const{values:o,type:i}=this._parseLocalColor(t);if(o){const t=i.toUpperCase(),{options:s}=this._root.interaction,n=s.find((e=>e.getAttribute("data-type")===t));if(n&&!n.hidden)for(const t of s)t.classList[t===n?"add":"remove"]("active");return!!this.setHSVA(...o,e)&&this.setColorRepresentation(t)}return!1}setColorRepresentation(t){return t=t.toUpperCase(),!!this._root.interaction.options.find((e=>e.getAttribute("data-type").startsWith(t)&&!e.click()))}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}return e.default})(),t.exports=e()}},e={};function o(i){var s=e[i];if(void 0!==s)return s.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,o),n.exports}o.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return o.d(e,{a:e}),e},o.d=(t,e)=>{for(var i in e)o.o(e,i)&&!o.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var i={};return(()=>{"use strict";o.d(i,{default:()=>g});var t=o(931),e=o.n(t);const s=t=>{const e=t.touches&&t.touches[0]||t;return{tap:e,x:e.clientX,y:e.clientY,target:e.target}};let n=document.createElement("p");function*r(t,e,o=-1){for(let i;i=e.exec(t);)yield~o?i[o].trim():i.map((t=>t.trim()))}function a(t,e,o=-1){const i=t.match(e);return i?~o?i[o]:i:null}function l(t){const e="rgba(0, 0, 0, 0)";if(n.style.color=e,t===e)return t;n.style.color=t;const o=getComputedStyle(n).color;return o===e?null:o}const c={angleToDegrees(t){const e=t.trim().toLowerCase().match(/^(-?\d*(\.\d+)?)(deg|rad|grad|turn)$/i);if(!e)return null;const o=Number(e[1]);switch(e[3]){case"deg":return o;case"rad":return 180/Math.PI*o;case"grad":return o/400*360;case"turn":return 360*o}return null}},{utils:p}=e(),{on:h,off:d,eventPath:u}=p;class m{_stops=[];_listeners=[];_angle=0;_angles=[{angle:0,name:"to top"},{angle:90,name:"to right"},{angle:180,name:"to bottom"},{angle:270,name:"to left"}];_direction="circle at center";_directions=[{pos:"tl",css:"circle at left top"},{pos:"tm",css:"circle at center top"},{pos:"tr",css:"circle at right top"},{pos:"r",css:"circle at right"},{pos:"m",css:"circle at center"},{pos:"l",css:"circle at left"},{pos:"br",css:"circle at right bottom"},{pos:"bm",css:"circle at center bottom"},{pos:"bl",css:"circle at left bottom"}];_focusedStop=null;_mode="linear";_modes=["linear","radial"];_root=null;_eventListener={init:[],change:[],hide:[],show:[]};constructor(o){o=Object.assign({stops:[["#42445a",0],["#20b6dd",1]]},o),this._root=t.utils.createFromTemplate(`\n<div class="gpickr" :ref="root">\n    <div class="sk_gpicker_layout">\n        <div :ref="pickr" class="sk_gpicker_layout_picker_wrapper">\n            <div class="sk_picker_g"></div>\n        </div>\n        <div :obj="gradient" class="sk_gpicker_layout_rest_wrapper gpcr-interaction">\n        <div :ref="result" class="gpcr-result">\n            \n            <div :ref="mode" data-mode="linear" class="gpcr-mode"></div>\n\n                <div :ref="angle" class="gpcr-angle">\n                    <div :ref="arrow"></div>\n                </div>\n\n                <div :ref="pos" class="gpcr-pos">\n                    ${["tl","tm","tr","l","m","r","bl","bm","br"].map((t=>`<div data-pos="${t}"></div>`)).join("")}\n                </div>\n            </div>\n\n            <div :obj="stops" class="gpcr-stops">\n                <div :ref="preview" class="gpcr-stop-preview"></div>\n                <div :ref="markers" class="gpcr-stop-marker"></div>\n            </div>\n        \n        </div>\n    </div>\n    <div :obj="footer" class="sk_gpicker_layout_footer_wrapper">\n        <button :ref="save" class="sk_btn">save</button>\n    </div>\n</div>\n`),console.log(this._root),CSS.supports("background-image","conic-gradient(#fff, #fff)")&&this._modes.push("conic"),o.el.appendChild(this._root.root),this.listeners,this._pickr=e().create({el:".sk_picker_g",container:this._root.root,theme:"nano",inline:!0,showAlways:!0,defaultRepresentation:"HEXA",swatches:o.swatches,components:{palette:!0,preview:!0,opacity:!0,hue:!0,interaction:{input:!0}}}).on("change",(t=>{this._focusedStop&&(this._focusedStop.color=t.toRGBA().toString(0),this._render())})).on("hide",(t=>{this._pickr.destroyAndRemove()})).on("init",(()=>{for(const[t,e]of o.stops)this.addStop(t,e,!0);this._bindEvents(),this._emit("init",this)}))}_bindEvents(){const{gradient:t}=this._root;this._listeners.push(h(this._root.footer.save,"click",(()=>this.isOpen()?this.hide():this.show()))),this._listeners.push(h(document,"keyup",(t=>this.isOpen()&&("Escape"===t.key||"Escape"===t.code)&&this.hide()))),this._listeners.push(h(document,["touchstart","mousedown"],(t=>{this.isOpen()&&!u(t).some((t=>t===this._root.root||t===this._root.footer.save))&&this.hide()}),{capture:!0})),this._listeners.push(h(t.mode,["mousedown","touchstart"],(t=>{const e=this._modes.indexOf(this._mode)+1;this._mode=this._modes[e===this._modes.length?0:e],this._render(!0),t.stopPropagation()}))),this._listeners.push(h(t.stops.preview,"click",(t=>{this.addStop(this._pickr.getColor().toRGBA().toString(),this._resolveColorStopPosition(t.pageX))}))),this._listeners.push(h(t.result,["mousedown","touchstart"],(e=>{if(e.preventDefault(),"linear"!==this._mode)return;t.angle.classList.add("gpcr-active");const o=h(window,["mousemove","touchmove"],(e=>{const{x:o,y:i}=s(e),n=t.angle.getBoundingClientRect(),r=n.left+n.width/2,a=n.top+n.height/2,l=Math.atan2(o-r,i-a)-Math.PI,c=Math.abs(180*l/Math.PI),p=[1,2,4][Number(e.shiftKey||2*e.ctrlKey)];this.setLinearAngle(c-c%(45/p))})),i=h(window,["mouseup","touchend","touchcancel"],(()=>{t.angle.classList.remove("gpcr-active"),d(...o),d(...i)}))}))),this._listeners.push(h(t.pos,["mousedown","touchstart"],(t=>{const e=t.target.getAttribute("data-pos"),o=this._directions.find((t=>t.pos===e));this.setRadialPosition(o&&o.css||this._direction)})))}isOpen(){return this._root.root.classList.contains("visible")}reposition(t,e){let o=t,i=e;const s=this._root.root,n=window.innerWidth,r=window.innerHeight,a=s.offsetWidth,l=s.offsetHeight;o+a>n&&(o=n-a-10),i+l>r&&(i=r-l-10),o=Math.max(o,10),i=Math.max(i,10),s.style.left=`${o}px`,s.style.top=`${i}px`}show(t,e){return!this.isOpen()&&(this._root.root.classList.add("visible"),this.reposition(t,e),this._emit("show"),this)}hide(){return!!this.isOpen()&&(this._root.root.classList.remove("visible"),this._emit("hide"),!0)}_render(t=!1){const{stops:{preview:e},result:o,arrow:i,angle:s,pos:n,mode:r}=this._root.gradient,{_stops:a,_mode:l,_angle:c}=this;a.sort(((t,e)=>t.loc-e.loc));for(const{color:t,el:e,loc:o}of a)Object.assign(e.style,{left:100*o+"%",color:t});i.style.transform=`rotate(${c-90}deg)`,e.style.background=`linear-gradient(to right, ${this.getStops().toString("linear")})`,o.style.background=this.getGradient().toString(),n.style.opacity="radial"===l?"":"0",n.style.visibility="radial"===l?"":"hidden",s.style.opacity="linear"===l?"":"0",s.style.visibility="linear"===l?"":"hidden",r.setAttribute("data-mode",l),!t&&this._emit("change",this)}_resolveColorStopPosition(t){const{markers:e}=this._root.gradient.stops,o=e.getBoundingClientRect();let i=(t-o.left)/o.width;return i<0&&(i=0),i>1&&(i=1),i}addStop(t,e=.5,o=!1){const{markers:i}=this._root.gradient.stops,n=p.createElementFromString('<div class="gpcr-marker"></div>');i.appendChild(n),this._pickr.setColor(t),t=this._pickr.getColor().toRGBA().toString(0);const r={el:n,loc:e,color:t,listener:h(n,["mousedown","touchstart"],(t=>{t.preventDefault();const e=i.getBoundingClientRect();this._pickr.setColor(r.color),this._focusedStop=r;let o=!1;const a=h(window,["mousemove","touchmove"],(t=>{const{x:i,y:a}=s(t),l=Math.abs(a-e.y);o=l>50&&this._stops.length>2,n.style.opacity=o?"0":"1",o||(r.loc=this._resolveColorStopPosition(i),this._render())})),l=h(window,["mouseup","touchend","touchcancel"],(()=>{d(...a),d(...l),o&&(this.removeStop(r),this._render(!0))}))}))};return this._focusedStop=r,this._stops.push(r),this._render(o),this}removeStop(t){const{_stops:e}=this,o="number"==typeof t?e.find((t=>t.loc===t)):"string"==typeof t?e.find((t=>t.color===t)):"object"==typeof t?t:void 0;e.splice(e.indexOf(o),1),o.el.remove(),d(...o.listener),this._focusedStop===o&&(this._focusedStop=e[0]),this._render()}setGradient(t){const e=(t=>{document.body.appendChild(n);const e=function(t){if(!(t=function(t){return n.style.backgroundImage=t,getComputedStyle(n).backgroundImage}(t)))return null;const[,e,o]=t.match(/^(\w+)-gradient\((.*)\)$/i)||[];if(!e||!o)return null;const i=[...r(o,/(rgba?\(.*?\)|#?\w+)(.*?)(?=,|$)/gi)],s=[];let c=null,p=null;for(let t=0;t<i.length;t++){const[e,o,n]=i[t],r=l(o),h=n.split(/\s+/g).map((t=>a(t,/^-?(\d*(\.\d+)?)%$/,1))).filter(Boolean).map(Number);if(!h.length&&r)s.push({loc:null,color:r});else if(h.length)for(const t of h)s.push({loc:t,color:r||p});else c||(c=e);p=r||p}s[s.length-1].loc||(s[s.length-1].loc=100);for(let t=0;t<s.length;t++){const e=s[t];if(!e.loc)if(t){let o=2,i=t+1;for(;i<s.length&&!s[i].loc;i++)o++;e.loc=s[t-1].loc+(s[i].loc-s[t-1].loc)/o}else e.loc=0}return{str:t,type:e,modifier:c,stops:s}}(t);return document.body.removeChild(n),e})(t);if(!e||e.stops.length<2)return!1;const{type:o,stops:i,modifier:s}=e,c=[...this._stops];if(this._modes.includes(o)){this._mode=o;for(const t of i)this.addStop(t.color,t.loc/100);for(const t of c)this.removeStop(t);return"linear"===o?(this._angle=180,s&&this.setLinearAngle(s)):"radial"===o&&(this._direction="circle at center",s&&this.setRadialPosition(s)),!0}return!1}getGradient(t=this._mode){const e=this.getStops().toString(t);switch(t){case"linear":return`linear-gradient(${this._angle}deg, ${e})`;case"radial":return`radial-gradient(${this._direction}, ${e})`;case"conic":return`conic-gradient(${e})`}}getStops(){const t=this._stops.map((t=>({color:t.color,location:t.loc}))),e=this._mode;return t.toString=function(t=e){switch(t){case"linear":case"radial":return this.map((t=>`${t.color} ${100*t.location}%`)).join(",");case"conic":return this.map((t=>`${t.color} ${360*t.location}deg`)).join(",")}},t}getLinearAngle(){return"linear"===this._mode?this._angle:-1}setLinearAngle(t){return"number"==typeof(t="number"==typeof t?t:c.angleToDegrees(t)||(this._angles.find((e=>e.name===t))||{}).angle)&&(this._angle=t,this._render(),!0)}setRadialPosition(t){const e=this._directions.find((e=>e.css===t));if(!e)return!1;this._direction=e.css;for(const t of Array.from(this._root.gradient.pos.children))t.classList[t.getAttribute("data-pos")===e.pos?"add":"remove"]("gpcr-active");return this._render(),!0}getRadialPosition(){return"radial"===this._mode?this._direction:null}_emit(t,...e){this._eventListener[t].forEach((t=>t(...e,this)))}on(t,e){return"function"==typeof e&&"string"==typeof t&&t in this._eventListener&&this._eventListener[t].push(e),this}off(t,e){const o=this._eventListener[t];if(o){const t=o.indexOf(e);~t&&o.splice(t,1)}return this}destroy(){this._listeners.forEach((t=>d(...t))),this._listeners.length=0,this._stops.forEach((({listener:t,el:e})=>{d(...t),e.remove()})),this._stops.length=0,this._pickr&&(this._pickr.destroyAndRemove(),this._pickr=null),this._root?.root?.parentNode&&this._root.root.parentNode.removeChild(this._root.root),Object.keys(this._eventListener).forEach((t=>this._eventListener[t].length=0))}}m.Pickr=e();const g=m})(),i.default})()));
